"use strict";(self.webpackChunkdevelopment_framework_docs=self.webpackChunkdevelopment_framework_docs||[]).push([[8499],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),l=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},c=function(e){var t=l(e.components);return i.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),d=l(n),m=a,k=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return n?i.createElement(k,p(p({ref:t},c),{},{components:n})):i.createElement(k,p({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,p=new Array(o);p[0]=d;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:a,p[1]=r;for(var l=2;l<o;l++)p[l]=n[l];return i.createElement.apply(null,p)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6306:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>p,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>l});var i=n(7462),a=(n(7294),n(3905));const o={title:"Recipes",sidebar_position:2},p=void 0,r={unversionedId:"concepts/recipes",id:"concepts/recipes",title:"Recipes",description:"To express how a model is stored and how it is presented, we use a concept of StorageRecipes and UiRecipes.",source:"@site/docs/concepts/recipes.md",sourceDirName:"concepts",slug:"/concepts/recipes",permalink:"/dm-docs/docs/concepts/recipes",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Recipes",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Blueprints and entities",permalink:"/dm-docs/docs/concepts/blueprints"},next:{title:"Plugins",permalink:"/dm-docs/docs/concepts/plugins"}},s={},l=[{value:"StorageRecipe",id:"storagerecipe",level:2},{value:"UiRecipe",id:"uirecipe",level:2},{value:"RecipeLinks, RecipeLookups and ApplicationContexts",id:"recipelinks-recipelookups-and-applicationcontexts",level:2},{value:"Default RecipeLinks",id:"default-recipelinks",level:3},{value:"Web apps and ApplicationContexts",id:"web-apps-and-applicationcontexts",level:3}],c={toc:l};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"To express how a model is ",(0,a.kt)("em",{parentName:"p"},"stored")," and how it is ",(0,a.kt)("em",{parentName:"p"},"presented"),", we use a concept of StorageRecipes and UiRecipes."),(0,a.kt)("p",null,"A recipe is an instance of the core Storage-/UiRecipe blueprints."),(0,a.kt)("h2",{id:"storagerecipe"},"StorageRecipe"),(0,a.kt)("p",null,"A recipe for how to store the data for an entity based on the given blueprint type."),(0,a.kt)("p",null,"StorageRecipes are mainly to be consumed by the Data Modelling Storage Service.  "),(0,a.kt)("p",null,"For now, StorageRecipes are mainly used to split large models into smaller parts. Either because it makes sense logically, or for performance reasons."),(0,a.kt)("p",null,"A StorageRecipes may look something like this;"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "dmss://system/SIMOS/StorageRecipe",\n  "name": "DEFAULT",\n  "description": "",\n  "attributes": [\n    {\n      "name": "content",\n      "type": "object",\n      "contained": false\n    }\n  ]\n}\n')),(0,a.kt)("p",null,"This StorageRecipes is used for the core ",(0,a.kt)("inlineCode",{parentName:"p"},"dmss://system/SIMOS/Package"),'-type. Here we can see that any objects that are a\npart of the "content" attribute for a package, is not contained in that package entity but is only referred to. Which makes sense logically.  Instead of the actual object, a reference object is added, and it includes the name, type, and _id of the object referenced. '),(0,a.kt)("h2",{id:"uirecipe"},"UiRecipe"),(0,a.kt)("p",null,"A recipe for how to present data."),(0,a.kt)("p",null,"UiRecipes follow many of the same patterns as StorageRecipes, but are used when any client is to present an entity to a user. Like in a web application. "),(0,a.kt)("p",null,"A UiRecipe may look something like this;"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "dmss://system/SIMOS/UiRecipe",\n  "name": "Edit",\n  "description": "Default blueprint edit",\n  "plugin": "edit-blueprint",\n  "category": "edit",\n  "config": {\n    "type": "dmss://system/SIMOS/PluginsConfig/EditBlueprint",\n    "fontColor": "blue"\n  }\n}\n')),(0,a.kt)("p",null,"This example is a UiRecipe used for entities of the core ",(0,a.kt)("inlineCode",{parentName:"p"},"dmss://system/SIMOS/Blueprint"),"-type.",(0,a.kt)("br",{parentName:"p"}),"\n",'This particular recipe is used to load a javascript UI-plugin named "edit-blueprint".\nThe "config" value of a UiRecipe is of type "object", and can be any valid blueprint. The object itself is passed to the plugin, and it\'s up to the plugin to interpret the config object.'),(0,a.kt)("h2",{id:"recipelinks-recipelookups-and-applicationcontexts"},"RecipeLinks, RecipeLookups and ApplicationContexts"),(0,a.kt)("p",null,"Since different applications may have different needs for viewing the same model, UiRecipes can only be associated with a\nspecific blueprint by creating an ",(0,a.kt)("strong",{parentName:"p"},"application recipe lookup"),"."),(0,a.kt)("mermaid",{value:"flowchart TB;\n    subgraph Lookup 2\n    A2[Application 2]\n    end\n    \n    subgraph Lookup 1\n    A1[Application 1]--\x3eB1[[Blueprint reference]];\n    A1--\x3eB2[[Blueprint reference]];\n    \n    B1--\x3e R1>Recipe]\n    B1--\x3e R2>Recipe]\n    end"}),(0,a.kt)("p",null,"This diagram shows the relationship between a named ",(0,a.kt)("em",{parentName:"p"},"lookup"),', a list of blueprint references, and recipes for each blueprint.\nThe lookup object itself "lives" in an DMSS instance, and can be created by either basic API-calls, or using the ',(0,a.kt)("a",{parentName:"p",href:"https://github.com/equinor/dm-cli"},"DM-CLI")," tool."),(0,a.kt)("p",null,'Input for the "create application lookup" is a ',(0,a.kt)("em",{parentName:"p"},"name")," (the application name should be used), and a path to a (sub)package\nthat has been uploaded to DMSS."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"dm create-lookup myApp MyDataSource/instances/recipe_links\n")),(0,a.kt)("p",null,"This will create a lookup with name ",(0,a.kt)("inlineCode",{parentName:"p"},"myApp")," in DMSS, based on all the entities of ",(0,a.kt)("inlineCode",{parentName:"p"},"dmss://system/SIMOS/RecipeLink")," found within the ",(0,a.kt)("inlineCode",{parentName:"p"},"MyDataSource/instances/recipe_links"),"-package."),(0,a.kt)("p",null,"For reference, ",(0,a.kt)("em",{parentName:"p"},"RecipeLinks")," may look like this;"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "dmss://system/SIMOS/RecipeLink",\n  "_blueprintPath_": "dmss://system/SIMOS/Blueprint",\n  "uiRecipes": [\n    {\n      "name": "Yaml",\n      "type": "dmss://system/SIMOS/UiRecipe",\n      "plugin": "yaml-view"\n    },\n    {\n      "type": "dmss://system/SIMOS/UiRecipe",\n      "name": "Edit",\n      "description": "Default blueprint edit",\n      "plugin": "edit-blueprint"\n    }\n  ],\n  "storageRecipes": [\n        {\n      "type": "dmss://system/SIMOS/StorageRecipe",\n      "name": "DefaultStorageRecipe",\n      "attributes": [\n        {\n          "name": "attributes",\n          "type": "dmss://system/SIMOS/StorageAttribute",\n          "contained": true\n        }\n      ]\n    }\n  ]\n}\n')),(0,a.kt)("h3",{id:"default-recipelinks"},"Default RecipeLinks"),(0,a.kt)("p",null,"To set an application wide default RecipeLink, you can create an entity of type RecipeLink with a ",(0,a.kt)("inlineCode",{parentName:"p"},"_blueprintPath_")," set to ",(0,a.kt)("inlineCode",{parentName:"p"},"_default_"),". All blueprints in your app that ",(0,a.kt)("em",{parentName:"p"},"does not have a specific RecipeLink")," will then use the recipes given in this ",(0,a.kt)("inlineCode",{parentName:"p"},"_default_")," RecipeLink."),(0,a.kt)("p",null,"As a last fallback, if no recipes are found from the Apps RecipeLookup, a set of builtin recipes will be provided.",(0,a.kt)("br",{parentName:"p"}),"\n","Namely ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/equinor/dm-core-packages/tree/main/packages/yaml-view"},"YAML-view"),", and ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/equinor/dm-core-packages/tree/main/packages/form-edit"},"form"),"."),(0,a.kt)("h3",{id:"web-apps-and-applicationcontexts"},"Web apps and ApplicationContexts"),(0,a.kt)("p",null,"This could be considered an advanced topic, which you might not need to worry about. But understanding the underlying functionality could be useful if you want to do something special."),(0,a.kt)("p",null,"The main component recommend to render entites in a ReactJS web application is the ",(0,a.kt)("inlineCode",{parentName:"p"},"<UIPluginSelector>")," from the core javascript library.\nYou would use that like so;"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"import { UIPluginSelector} from '@development-framework/dm-core'\n...\n<UIPluginSelector\n    absoluteDottedId={`${dataSourceId}/${entity._id}`}\n    type={entity.type}\n/>\n...\n")),(0,a.kt)("p",null,"Now, without any reference to an ",(0,a.kt)("em",{parentName:"p"},"application recipe lookup"),", this would not find any UiRecipes, and only use the default ones.\nThe missing part is wrapping the ",(0,a.kt)("inlineCode",{parentName:"p"},"<UIPluginSelector>")," in an ",(0,a.kt)("em",{parentName:"p"},"ApplicationContext"),". This is already handled for you in the ",(0,a.kt)("inlineCode",{parentName:"p"},"create-dm-app"),",\nbut if you want to do it yourself, it could look something like this;"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"function App() {\n  const [application, isLoading, updateApplication, error] = useDocument(myApplicationEntityId)\n\n  return (\n    <ApplicationContext.Provider value={application}>\n      <UIPluginSelector\n        absoluteDottedId={`${dataSourceId}/${application?._id}`}\n        type={application?.type}\n      />\n    </ApplicationContext.Provider>\n  )\n}\n")),(0,a.kt)("p",null,"You can read more about React contexts ",(0,a.kt)("a",{parentName:"p",href:"https://beta.reactjs.org/reference/react/useContext"},"here"),".",(0,a.kt)("br",{parentName:"p"}),"\n","You only need to wrap you application once, not on every usage of the ",(0,a.kt)("inlineCode",{parentName:"p"},"<UIPluginSelector>"),"."))}u.isMDXComponent=!0}}]);