"use strict";(self.webpackChunkdevelopment_framework_docs=self.webpackChunkdevelopment_framework_docs||[]).push([[6831],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=p(n),c=r,k=u["".concat(s,".").concat(c)]||u[c]||m[c]||i;return n?a.createElement(k,l(l({ref:t},d),{},{components:n})):a.createElement(k,l({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},421:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:1},l="Blueprints and entities",o={unversionedId:"concepts/blueprints",id:"concepts/blueprints",title:"Blueprints and entities",description:"Blueprints and entitites are the core of the Development Framework. Understanding them is essential, but not trivial, so if you have any questions after reading this article, please do not hesitate to ask.",source:"@site/docs/concepts/blueprints.md",sourceDirName:"concepts",slug:"/concepts/blueprints",permalink:"/dm-docs/docs/concepts/blueprints",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Getting started",permalink:"/dm-docs/docs/getting-started"},next:{title:"Recipes",permalink:"/dm-docs/docs/concepts/recipes"}},s={},p=[{value:"What is a Blueprint?",id:"what-is-a-blueprint",level:2},{value:"What is an entity?",id:"what-is-an-entity",level:2},{value:"How to create a Blueprint?",id:"how-to-create-a-blueprint",level:2},{value:"system/SIMOS/Blueprint",id:"systemsimosblueprint",level:3},{value:"system/SIMOS/BlueprintAttribute",id:"systemsimosblueprintattribute",level:3},{value:"References to other blueprints",id:"references",level:2},{value:"Model and storage containment",id:"model-and-storage-containment",level:2},{value:"Model containment",id:"model-containment",level:3},{value:"Storage containment",id:"storage-containment",level:3}],d={toc:p};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"blueprints-and-entities"},"Blueprints and entities"),(0,r.kt)("p",null,"Blueprints and entitites are the core of the Development Framework. Understanding them is essential, but not trivial, so if you have any questions after reading this article, please do not hesitate to ask."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Entities are to blueprints what objects are to classes.")),(0,r.kt)("h2",{id:"what-is-a-blueprint"},"What is a Blueprint?"),(0,r.kt)("p",null,"A blueprint is described in ",(0,r.kt)("a",{parentName:"p",href:"https://www.json.org/json-en.html"},"JSON"),"."),(0,r.kt)("p",null,"Below is a short version of a Car blueprint."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'showLineNumbers title="Car.blueprint.json"',showLineNumbers:!0,title:'"Car.blueprint.json"'},'{\n  "name": "Car",\n  "type": "dmss://system/SIMOS/Blueprint",\n  "description": "A description of a car",\n  "attributes": [\n    {\n      "name": "type",\n      "type": "dmss://system/SIMOS/BlueprintAttribute",\n      "attributeType": "string"\n    },\n    {\n      "name": "carModel",\n      "type": "dmss://system/SIMOS/BlueprintAttribute",\n      "attributeType": "string"\n    },\n    {\n      "name": "registrationNumber",\n      "type": "dmss://system/SIMOS/BlueprintAttribute",\n      "attributeType": "string"\n    }\n  ]\n}\n')),(0,r.kt)("p",null,"What can we read out of this code?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Line 2 contains the name of the blueprint, which is used when referring to this blueprint."),(0,r.kt)("li",{parentName:"ul"},"Line 3 contains the type of the blueprint. The word ",(0,r.kt)("inlineCode",{parentName:"li"},"type")," carries some extra meaning in the Development Framework since it tells us which blueprint a blueprint or entity is implementing. In this case, it tells us that this JSON object is of type ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/equinor/data-modelling-storage-service/blob/master/src/home/system/SIMOS/Blueprint.json"},"dmss://system/SIMOS/Blueprint"),", and will therefore have attributes such as ",(0,r.kt)("inlineCode",{parentName:"li"},"name"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"type"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"description")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"attributes"),". If you open the URL, you can see that it links to a blueprint with name Blueprint and type ",(0,r.kt)("inlineCode",{parentName:"li"},"dmss://system/SIMOS/Blueprint"),". That means that the Blueprint blueprint actually implements itself!"),(0,r.kt)("li",{parentName:"ul"},"Line 4 contains the description of the blueprint, which tells us that this blueprint can be used to describe a car."),(0,r.kt)("li",{parentName:"ul"},"Line 5 to 21 list the attributes of the blueprint - ",(0,r.kt)("inlineCode",{parentName:"li"},"type"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"carModel")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"registrationNumber"),". All entities implementing this blueprint must have these three attributes, and only them. An attribute definition is always an implementation of the ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/equinor/data-modelling-storage-service/blob/master/src/home/system/SIMOS/BlueprintAttribute.json"},"dmss://system/SIMOS/BlueprintAttribute"),", hence the type.")),(0,r.kt)("h2",{id:"what-is-an-entity"},"What is an entity?"),(0,r.kt)("p",null,"An entity populates the attributes of the blueprint with real values."),(0,r.kt)("p",null,"An entity of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Car")," blueprint described above can look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'showLineNumbers title="car.entity.json"',showLineNumbers:!0,title:'"car.entity.json"'},'{\n  "type": "./Car",\n  "carModel": "Skoda Octavia",\n  "registrationNumber": "AB12345"\n}\n')),(0,r.kt)("p",null,'The entity has exactly three attributes ("type", "carModel", and "registrationNumber"), all of which are defined in the attribute list of the Car blueprint.'),(0,r.kt)("p",null,"Notice how the ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," attribute refers to the name attribute of the blueprint we wrote above? For more info about how to reference blueprints, see ",(0,r.kt)("a",{parentName:"p",href:"#references"},"References to other blueprints"),"."),(0,r.kt)("h2",{id:"how-to-create-a-blueprint"},"How to create a Blueprint?"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," should reflect what the model is, and should be written in CamelCase."),(0,r.kt)("p",null,"For blueprints, the ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," should be a reference to ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/equinor/data-modelling-storage-service/blob/master/src/home/system/SIMOS/Blueprint.json"},(0,r.kt)("inlineCode",{parentName:"a"},"system/SIMOS/Blueprint")),", which is the Blueprint that is used to describe all other blueprints."),(0,r.kt)("p",null,"For each blueprint attribute, the ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," should be a reference to ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/equinor/data-modelling-storage-service/blob/master/src/home/system/SIMOS/BlueprintAttribute.json"},(0,r.kt)("inlineCode",{parentName:"a"},"system/SIMOS/BlueprintAttribute")),", which is the Blueprint that describe the attributes for Blueprints."),(0,r.kt)("h3",{id:"systemsimosblueprint"},"system/SIMOS/Blueprint"),(0,r.kt)("p",null,"Has the following attributes, where ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," is required."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attribute"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"type"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"A reference to the Blueprint type.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"The name of the blueprint")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"description"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"More information about the blueprint")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"extends"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"A list of references to other blueprints. The blueprint will inherit all the attributes from the blueprint(s) it extends from.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"attributes"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"system/SIMOS/BlueprintAttribute")),(0,r.kt)("td",{parentName:"tr",align:null},"List of attributes.")))),(0,r.kt)("h3",{id:"systemsimosblueprintattribute"},"system/SIMOS/BlueprintAttribute"),(0,r.kt)("p",null,"Has the following attributes, where ",(0,r.kt)("inlineCode",{parentName:"p"},"name"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"attributeType")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," is required."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Attribute"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the attribute.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"type"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"A reference to the BlueprintAttribute type.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"description"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Extra information")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"attributeType"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"The attribute type. Can be a reference to another blueprint, or a primitive type (string, integer, number, boolean).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dimensions"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Degree of dimensions, formatted as a comma separated list of integers or ",(0,r.kt)("inlineCode",{parentName:"td"},"*"),". The ",(0,r.kt)("inlineCode",{parentName:"td"},"*"),' (wildcard) has the special meaning of "unknown length". Ex: ',(0,r.kt)("inlineCode",{parentName:"td"},"*")," (1D of unknown length), ",(0,r.kt)("inlineCode",{parentName:"td"},"2,2")," (2D of size 2x2), ",(0,r.kt)("inlineCode",{parentName:"td"},"3,*")," (2D, where the inner array have unknown length and the outer array have length 3)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"label"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"A pretty variant of the attribute name, used to display the attribute name in a user friendly manner.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"default"),(0,r.kt)("td",{parentName:"tr",align:null},"any json"),(0,r.kt)("td",{parentName:"tr",align:null},"Default value for the attribute. Same type as the attribute itself")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"optional"),(0,r.kt)("td",{parentName:"tr",align:null},"boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"If the attribute is optional or required")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"contained"),(0,r.kt)("td",{parentName:"tr",align:null},"boolean"),(0,r.kt)("td",{parentName:"tr",align:null},"Can be used for non-primitive attributes to describes the conceptual belonging of one entity to another. A contained attribute is owned by the document listing it, and will be deleted alongside its parent. An uncontained attribute is owned by another document.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"enumType"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Can be used as an extra limitation on primitive attributes. Ex: Setting attributeType to string and enumType to ",(0,r.kt)("a",{parentName:"td",href:"https://github.com/equinor/data-modelling-storage-service/blob/master/src/home/system/SIMOS/enums/StorageTypes.json"},"dmss://system/SIMOS/enums/StorageTypes"),' will limit the valid options to "default", "blob", "video", "large" and "veryLarge".')))),(0,r.kt)("h2",{id:"references"},"References to other blueprints"),(0,r.kt)("p",null,"It is possible to reference other blueprint from the ",(0,r.kt)("inlineCode",{parentName:"p"},"type"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"extends"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"attributeType"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"_blueprintPath_")," attributes."),(0,r.kt)("p",null,"There are several ways to describe a reference to other blueprints, all of which are understood and resolved during import. For example, if you write in your local .json file the\naddress ",(0,r.kt)("inlineCode",{parentName:"p"},"CORE:Blueprint")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"./blueprints/Car")," and upload the blueprints to dmss, then those addresses will be translated to for example ",(0,r.kt)("inlineCode",{parentName:"p"},"dmss://system/SIMOS/Blueprint"),"\nand ",(0,r.kt)("inlineCode",{parentName:"p"},"dmss://DemoDataSource/carPackage/Car")," before the documents are saved in the database."),(0,r.kt)("p",null,'Note that the reference is created using the name attribute of the blueprint you want to refer to, not its filename. I.e. "Car", not "Car.blueprint.json".'),(0,r.kt)("p",null,"Example of address types:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Address type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Example"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"By path"),(0,r.kt)("td",{parentName:"tr",align:null},"Full absolute path prefixed with protocol"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"dmss://datasource/package/entity")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"dmss://datasource/package/subfolder/entity"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"By id"),(0,r.kt)("td",{parentName:"tr",align:null},"Refer to a document using id. The id must be prefixed with a ",(0,r.kt)("inlineCode",{parentName:"td"},"$")," sign."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"dmss://datasource/$2d7c3249-985d-43d2-83cf-a887e440825a"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"By alias"),(0,r.kt)("td",{parentName:"tr",align:null},"Require dependencies to be defined somewhere in the source tree using ",(0,r.kt)("a",{parentName:"td",href:"/dm-docs/docs/concepts/meta"},(0,r.kt)("em",{parentName:"a"},"meta"))," information."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ALIAS:package/entity")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"ALIAS:entity"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"By data source"),(0,r.kt)("td",{parentName:"tr",align:null},"Relative from the destination data source."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"/package/entity")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"/package/subfolder/entity"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"By Package"),(0,r.kt)("td",{parentName:"tr",align:null},"Relative from the source package"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"entity")," or ",(0,r.kt)("inlineCode",{parentName:"td"},"subfolder/entity"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"By dotted relative path"),(0,r.kt)("td",{parentName:"tr",align:null},"Relative from the file (UNIX directory traversal)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"./.../entity")," or  ",(0,r.kt)("inlineCode",{parentName:"td"},"../subfolder/entity"),"or ",(0,r.kt)("inlineCode",{parentName:"td"},"../../subfolder/entity"))))),(0,r.kt)("p",null,"Other syntax option  - these will work together with the address types in the above table."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Example"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Dot"),(0,r.kt)("td",{parentName:"tr",align:null},"Reference a complex attribute inside an entity"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"dmss://datasource/carPackage/car.engine.fuelPump"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Brackets"),(0,r.kt)("td",{parentName:"tr",align:null},"Use brackets + index to refer to list elements."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"dmss://datasource/carPackage/car.wheels[0]"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Hat"),(0,r.kt)("td",{parentName:"tr",align:null},"Use the ",(0,r.kt)("inlineCode",{parentName:"td"},"^")," syntax to refer to the document itself."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},'"^.cars[1]"'),", Also see example below")))),(0,r.kt)("p",null,"Example of hat syntax :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "Hertz",\n  "type": "./blueprints/CarRentalCompany",\n  "cars": [\n    {\n      "type": "./blueprints/Car",\n      "plateNumber": "1337",\n      "name": "Volvo"\n    }\n  ],\n  "customers": [\n    {\n      "type": "./blueprints/Customer",\n      "phoneNumber": 1337,\n      "name": "Jane",\n      "car": {\n        "address": "^.cars[0]",\n        "type": "CORE:Reference",\n        "referenceType": "link"\n      }\n    }\n  ]\n}\n')),(0,r.kt)("p",null,"Here, the address stored in ",(0,r.kt)("inlineCode",{parentName:"p"},"Hertz.customers[0].car.address")," refers to ",(0,r.kt)("inlineCode",{parentName:"p"},"Hertz.cars[0]"),". "),(0,r.kt)("h2",{id:"model-and-storage-containment"},"Model and storage containment"),(0,r.kt)("p",null,"For entities, we have the concept of containment either on a model or storage level."),(0,r.kt)("h3",{id:"model-containment"},"Model containment"),(0,r.kt)("p",null,"By ",(0,r.kt)("inlineCode",{parentName:"p"},"model contained"),", we mean that an entity belongs inside another entity.\nThis is determined by the boolean ",(0,r.kt)("inlineCode",{parentName:"p"},"contained")," flag in the BlueprintAttribute. By default, contained is set to true."),(0,r.kt)("p",null,"Model contained example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "Jason",\n  "type": "./Employee",\n  "manager": {\n    "type": "./Employee",\n    "name": "Bill",\n    "age": 33\n  },\n  "age": 27\n}\n')),(0,r.kt)("p",null,"For the employee ",(0,r.kt)("inlineCode",{parentName:"p"},"Jason"),", the manager attribute is contained inside the entity."),(0,r.kt)("p",null,"Model uncontained example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "Jason",\n  "type": "./Employee",\n  "manager": {\n    "type": "dmss://system/SIMOS/Reference",\n    "address": "DataSoruce/apps/EmployeeApp/Bill",\n    "referenceType": "link"\n  },\n  "age": 27\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "./Employee",\n  "name": "Bill",\n  "age": 33\n}\n')),(0,r.kt)("p",null,"In this case, the manager attribute is a ",(0,r.kt)("inlineCode",{parentName:"p"},"link reference")," to another entity stored somewhere in the database."),(0,r.kt)("p",null,"When fetching an entity from dmss, a ",(0,r.kt)("inlineCode",{parentName:"p"},"depth")," parameter can be included in the GET request to determine whether or not\nthe reference should be resolved.\n(Resolving a link reference means that a link reference is replaced by the actual entity the link reference points to.)"),(0,r.kt)("p",null,"If depth=0, the document will be returned without resolving any link references. If depth is higher than 1, references will be resolved."),(0,r.kt)("h3",{id:"storage-containment"},"Storage containment"),(0,r.kt)("p",null,"Unlike model containment, storage containment is defined in a blueprint's ",(0,r.kt)("inlineCode",{parentName:"p"},"RecipeLink")," and not in the blueprint itself.\nIf not specified, storage containment is set to true for all attributes in a blueprint."),(0,r.kt)("p",null,"Example fo storage uncontained:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "CORE:RecipeLink",\n  "_blueprintPath_": "dmss://DemoDataSource/apps/SimulationApp/blueprints/Simulation",\n  "uiRecipes": {},\n  "storageRecipes": [\n    {\n      "name": "DEFAULT",\n      "type": "dmss://system/SIMOS/StorageRecipe",\n      "description": "",\n      "attributes": [\n        {\n          "name": "bestSimulationResult",\n          "type": "dmss://system/SIMOS/StorageAttribute",\n          "contained": false\n        }\n      ]\n    }\n  ]\n}\n')),(0,r.kt)("p",null,"Here, the recipe of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Simulation")," blueprint says that the attribute ",(0,r.kt)("inlineCode",{parentName:"p"},"bestSimulationResult")," is storage uncontained. "),(0,r.kt)("p",null,"This means that ",(0,r.kt)("inlineCode",{parentName:"p"},"bestSimulationResult")," will be stored separately from the entity of type ",(0,r.kt)("inlineCode",{parentName:"p"},"Simulation")," (in another document in the database)."),(0,r.kt)("p",null,"When modeling, it will look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "simulation1",\n  "type": "DemoDataSource/apps/SimulationApp/blueprints/Simulation",\n  "bestSimulationResult": {\n    "type": "dmss://system/SIMOS/Reference",\n    "address": "dmss://DemoDataSource/apps/SimulationApp/results/bestResult2023",\n    "referenceType": "storage"\n  }\n}\n')),(0,r.kt)("p",null,"Storage uncontained attributes will be stored as a storage reference in the entity."))}m.isMDXComponent=!0}}]);