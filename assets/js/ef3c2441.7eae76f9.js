"use strict";(self.webpackChunkdevelopment_framework_docs=self.webpackChunkdevelopment_framework_docs||[]).push([[7167],{74395:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>a});var l=i(74848),s=i(28453);const t={sidebar_position:3},d="Plugin development",o={id:"guides/plugin-development",title:"Plugin development",description:"Apps plugins",source:"@site/docs/guides/plugin-development.md",sourceDirName:"guides",slug:"/guides/plugin-development",permalink:"/dm-docs/docs/guides/plugin-development",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Application development",permalink:"/dm-docs/docs/guides/application-development"},next:{title:"Administration",permalink:"/dm-docs/docs/guides/administration/"}},r={},a=[{value:"Apps plugins",id:"apps-plugins",level:2},{value:"Adding a UiPlugin",id:"adding-a-uiplugin",level:3},{value:"Using a UiPlugin",id:"using-a-uiplugin",level:3},{value:"Jobs plugins",id:"jobs-plugins",level:2},{value:"Adding a job handler",id:"adding-a-job-handler",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"plugin-development",children:"Plugin development"}),"\n",(0,l.jsx)(n.h2,{id:"apps-plugins",children:"Apps plugins"}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsx)(n.p,{children:"Assumes that the app is created using create-dm-app and that it follows its folder structure."})}),"\n",(0,l.jsx)(n.h3,{id:"adding-a-uiplugin",children:"Adding a UiPlugin"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["First, create a folder under ",(0,l.jsx)(n.code,{children:"src/plugins/"})," for the new plugin like shown below."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"src/\n|_ plugins/\n  |_ new-plugin/\n    |_ index.tsx\n"})}),"\n",(0,l.jsxs)(n.p,{children:["The requirements for a plugin is to have a ",(0,l.jsx)(n.code,{children:"index.tsx"})," file which default exports a list of plugins, like this:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"import { EPluginType, TPlugin, IUIPlugin } from '@development-framework/dm-core'\n\nexport const PluginComponent = (props: IUIPlugin) => {\n  return (\n    <div>\n      Plugin content goes here!\n    </div>\n  )\n}\n\nexport const plugins: TPlugin[] = [\n  {\n    pluginName: 'newPlugin',\n    pluginType: EPluginType.UI,\n    component: PluginComponent,\n  },\n]\n"})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"index.tsx"}),"-file can export several plugins, and each plugin should have a unique ",(0,l.jsx)(n.code,{children:"name"}),", specify ",(0,l.jsx)(n.code,{children:"pluginType"})," (what kind of plugin it is), and the ",(0,l.jsx)(n.code,{children:"component"})," (React component) associated. Everything returned from the ",(0,l.jsx)(n.code,{children:"component"})," will be rendered."]}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsxs)(n.li,{children:["To load the UiPlugin, add it to ",(0,l.jsx)(n.code,{children:"src/plugins.js"}),", which contains the list of plugins to be loaded. Add the package name (plugin folder name) into the ",(0,l.jsx)(n.code,{children:"src/plugins.js"})," file like this."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-tsx",children:"const plugins = [\n    ...already existing plugins...\n    // The extra plugin to be loaded    \n    import('./plugins/new-plugin')\n]\n\nexport default plugins\n\n"})}),"\n",(0,l.jsx)(n.h3,{id:"using-a-uiplugin",children:"Using a UiPlugin"}),"\n",(0,l.jsx)(n.p,{children:"To associate a blueprint with a UiPlugin."}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Add a ",(0,l.jsx)(n.code,{children:"RecipeLink"})," entity under the data folder, e.g. ",(0,l.jsx)(n.code,{children:"app/data/DemoApplicationDataSource/instances/recipe_links/"}),", like this."]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\n  "type": "CORE:RecipeLink",\n  "_blueprintPath_": "/models/<Blueprint type>",\n  "uiRecipes": [\n    {\n      "type": "CORE:UiRecipe",\n      "name": "<recipe name>",\n      "plugin": "newPlugin",\n      "category": ""\n    }\n  ]\n}\n'})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"RecipeLink"})," entity contains a list of UiRecipes that will be associated with the blueprint specified in the ",(0,l.jsx)(n.code,{children:"_blueprintPath_"})," field. Each UiRecipe specify what plugin to be used by ",(0,l.jsx)(n.code,{children:"pluginName"}),", that is, the name used in the export of the plugin inside the ",(0,l.jsx)(n.code,{children:"index.tsx"}),"-file."]}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsxs)(n.li,{children:["After the ",(0,l.jsx)(n.code,{children:"RecipeLink"})," is added, create a ",(0,l.jsx)(n.em,{children:"lookup"})," with the app name and the ",(0,l.jsx)(n.em,{children:"recipe links"})," for it by running the command:"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"dm create-lookup demo-app DemoApplicationDataSource/instances/recipe_links\n"})}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsx)(n.p,{children:"The Data Modeling Storage Service must be running on localhost:5000"})}),"\n",(0,l.jsx)(n.h2,{id:"jobs-plugins",children:"Jobs plugins"}),"\n",(0,l.jsx)(n.h3,{id:"adding-a-job-handler",children:"Adding a job handler"}),"\n",(0,l.jsxs)(n.p,{children:["To add a job handler, follow the guide at ",(0,l.jsx)(n.a,{href:"https://github.com/equinor/dm-job#job-handler-plugins",children:"dm-job"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>o});var l=i(96540);const s={},t=l.createContext(s);function d(e){const n=l.useContext(t);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),l.createElement(t.Provider,{value:n},e.children)}}}]);